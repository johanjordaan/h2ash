// Generated by CoffeeScript 1.6.3
(function() {
  define([], function() {
    var CMAP, clamp, generate, pixel;
    CMAP = function(width, height) {
      var ret_val;
      return ret_val = {
        width: width,
        height: height,
        data: []
      };
    };
    clamp = function(source, limit) {
      if (source >= limit) {
        return limit;
      }
      return source;
    };
    pixel = function(cmap, i, r, g, b) {
      cmap.data[0 + i * 4] = clamp(r, 0xff);
      cmap.data[1 + i * 4] = clamp(g, 0xff);
      cmap.data[2 + i * 4] = clamp(b, 0xff);
      return cmap.data[3 + i * 4] = 0xff;
    };
    return generate = function(hmap) {
      var c, i, new_cmap, _i, _len, _ref;
      new_cmap = new CMAP(hmap.width, hmap.height);
      i = 0;
      _ref = hmap.data;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        c = _ref[_i];
        if (c < .5) {
          pixel(new_cmap, i, 0, 0, 255);
        } else if (c > .9) {
          c = c * 0xff;
          pixel(new_cmap, i, c, c, c);
        } else {
          c = c * 0xff;
          pixel(new_cmap, i, 0, c, 0);
        }
        i = i + 1;
      }
      return new_cmap;
    };
  });

}).call(this);
