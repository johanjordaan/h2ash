// Generated by CoffeeScript 1.6.3
(function() {
  define([], function() {
    return function($http, auth) {
      return {
        pre_register: function(data) {
          return $http.post('/api/pre_registration/register', data).error(function(data, status, headers, config) {
            return data;
          }).success(function(data, status, headers, config) {
            return data;
          });
        },
        login: function(data, cb) {
          return $http.post('/api/authentication/login', data).error(function(data, status, headers, config) {
            auth.authenticated = false;
            auth.token = '';
            return cb(false);
          }).success(function(data, status, headers, config) {
            auth.authenticated = data.error_code === 0;
            if (auth.authenticated) {
              auth.token = data.auth_token;
            } else {
              auth.token = '';
            }
            return cb(auth.authenticated);
          });
        }
      };
    };
  });

}).call(this);
