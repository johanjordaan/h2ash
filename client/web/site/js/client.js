// Generated by CoffeeScript 1.6.3
(function() {
  require.config({
    paths: {
      'jquery': '../bower_components/jquery/jquery.min',
      'bootstrap': '../bower_components/bootstrap/dist/js/bootstrap.min',
      'angular': '../bower_components/angular/angular',
      'angular-route': '../bower_components/angular-route/angular-route',
      'domReady': '../bower_components/requirejs-domready/domReady',
      'underscore': '../bower_components/underscore/underscore',
      'trig': '../js/utils/trig'
    },
    shim: {
      'bootstrap': {
        exports: 'bootstrap',
        deps: ['jquery']
      },
      'angular': {
        exports: 'angular'
      },
      'angular-route': {
        deps: ['angular']
      },
      'underscore': {
        exports: '_'
      },
      'trig': {
        exports: 'trig'
      }
    }
  });

  define(['jquery', 'bootstrap', 'underscore', 'require', 'angular', 'angular-route', 'trig'], function($, bootstrap, _, require, angular, angular_route, trig) {
    angular.module('app', ['ngRoute']).config(function($routeProvider) {
      return $routeProvider.when('/', {
        controller: 'LoginController',
        templateUrl: 'partials/client/login.html'
      }).when('/pre_registration', {
        controller: 'PreRegistrationController',
        templateUrl: 'partials/client/pre_registration.html'
      }).when('/pre_registration/validated', {
        controller: 'DefaultController',
        templateUrl: 'partials/client/pre_registration_validated.html'
      }).otherwise({
        redirectTo: '/'
      });
    }).factory('backend', function($http) {
      return {
        register: function(data) {
          return $http.post('/api/pre_registration/register', data).then(function(result) {
            return result.data;
          });
        }
      };
    }).controller('DefaultController', function($scope, $location) {
      return console.log('x');
    }).controller('LoginController', function($scope, $location) {
      return $scope.pre_register = function() {
        return $location.path('/pre_registration');
      };
    }).controller('PreRegistrationController', function($scope, $location, $timeout, backend) {
      $scope.finished = false;
      return $scope.submit_pre_registration = function() {
        $scope.error = true;
        $scope.error_message = "Invalid password";
        return backend.register({
          email: 'djjordaan@gmail.com',
          motivation: 'bacause'
        }).then(function(data) {
          debugger;
          return $scope.finished = true;
        });
      };
    });
    return require(['domReady!'], function(document) {
      angular.bootstrap(document, ['app']);
      return $('body').css('background-image', "url('http://www.h2ash.com/wp-content/uploads/2014/01/ClientBackground.jpg')");
    });
  });

}).call(this);
