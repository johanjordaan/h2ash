// Generated by CoffeeScript 1.6.3
(function() {
  require.config({
    paths: {
      'jquery': '../bower_components/jquery/jquery.min',
      'bootstrap': '../bower_components/bootstrap/dist/js/bootstrap.min',
      'angular': '../bower_components/angular/angular',
      'angular-route': '../bower_components/angular-route/angular-route',
      'domReady': '../bower_components/requirejs-domready/domReady',
      'underscore': '../bower_components/underscore/underscore',
      'trig': '../js/utils/trig',
      'THREE': '../bower_components/three.js/three.min'
    },
    shim: {
      'bootstrap': {
        exports: 'bootstrap',
        deps: ['jquery']
      },
      'angular': {
        exports: 'angular'
      },
      'angular-route': {
        deps: ['angular']
      },
      'underscore': {
        exports: '_'
      },
      'trig': {
        exports: 'trig'
      },
      'THREE': {
        exports: 'THREE'
      }
    }
  });

  define(['jquery', 'bootstrap', 'underscore', 'require', 'angular', 'angular-route', 'trig', './directives/draggable', './directives/window', './directives/workspace', './directives/widget', 'THREE', './services/api', './services/renderers'], function($, bootstrap, _, require, angular, angular_route, trig, draggable, window, workspace, widget, THREE, api, renderers) {
    angular.module('app', ['ngRoute']).config(function($routeProvider) {
      return $routeProvider.when('/', {
        templateUrl: 'partials/workspaces/login_workspace.html'
      }).when('/pre_registration', {
        templateUrl: 'partials/workspaces/pre_registration_workspace.html'
      }).when('/pre_registration/validated', {
        templateUrl: 'partials/workspaces/pre_registration_validated_workspace.html'
      }).when('/main', {
        templateUrl: 'partials/workspaces/main_workspace.html'
      }).otherwise({
        redirectTo: '/'
      });
    }).value('auth', {
      authenticated: false,
      token: ''
    }).service('backend', api).service('renderers', renderers).directive('draggable', draggable).directive('window', window).directive('workspace', workspace).directive('widget', widget).controller('leads_controller', function($scope, $timeout, backend) {
      var i, _i, _len, _ref, _results;
      $scope.leads = [];
      _ref = _.range(20);
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        i = _ref[_i];
        _results.push($scope.leads.push({
          email: 'email' + i,
          motivation: 'halloooeee ' + i,
          validated: true
        }));
      }
      return _results;
    }).controller('galaxy_controller', function($scope, $timeout, renderers) {
      var renderer;
      renderer = renderers.create_renderer("three_target", 320, 240);
      return $scope.add_renderer_to = function(element) {
        return element.append(renderer.renderer.domElement);
      };
    }).controller('about_controller', function($scope) {
      $scope.xxx = 'Here';
      return $scope.say_it = function(what) {
        $scope.xxx = what;
        return alert('I was told to say -> ' + what);
      };
    }).controller('login_controller', function($scope, $location, backend, auth) {
      $scope.login = function() {
        return backend.login($scope, {
          email: $scope.$$childHead.email,
          password: $scope.$$childHead.password
        }, function(authenticated) {
          if (authenticated) {
            return $location.path('/main');
          }
        });
      };
      return $scope.pre_register = function() {
        return $location.path('/pre_registration');
      };
    }).controller('pre_registration_controller', function($scope, $location, $timeout, backend) {
      $scope.finished = false;
      return $scope.register = function() {
        return backend.pre_register($scope, {
          email: $scope.$$childHead.email,
          motivation: $scope.$$childHead.motivation
        }, function(success) {
          if (success) {
            return $scope.finished = true;
          }
        });
      };
    }).run(function(renderers) {
      return renderers.run();
    });
    return require(['domReady!'], function(document) {
      angular.bootstrap(document, ['app']);
      return $('body').css('background-image', "url('/images/ClientBackground.jpg')");
    });
  });

}).call(this);
